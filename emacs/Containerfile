ARG fedora_version=34
FROM localhost/base:${fedora_version}

LABEL com.github.containers.toolbox="true" \
      usage="This image is meant to be used by toolbox -i <image-name> <container-name>" \
      summary="Image for my emacs" \
      maintainer="Jiri Konecny <DragonLich@psmail.xyz>"

# Required by emacs
#
# glibc-langpack-cs - missing locale
# google-noto*-fonts - add missing font for bottom modes indicators (Spacemacs)
#
# These are utilities used by emacs:
#
# ag - search engine (alternative to grep)
# pylint - python static linter
# discount - Markdown to HTML conventor
# importmagic|epc - to enable importmagic features
# pre-commit - required for magit when repo has pre-commit enabled
#
RUN dnf install -y \
    emacs \
    google-noto-cjk-fonts-common \
    google-noto-sans-cjk-ttc-fonts \
    glibc-langpack-cs \
    ag \
    python3-pip \
    python3-pylint \
    discount \
    python3-importmagic \
    python3-epc \
    git \
    pre-commit \
    make && \
    dnf clean all
